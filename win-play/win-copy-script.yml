
---
  - name: create folder playbook
    hosts: all
    become: true
    gather_facts: false
    tasks:
      - name: crete the folder structure as per requirement
        ansible.windows.win_file:
          path: C:\Temp\folder\subfolder
          state: directory
      - name: Copy file using win_copy
        ansible.windows.win_copy:
          #src: "\\\\SCCM\\temp\\foo.txt"  # Source file path on the source server
          #dest: "C:\\temp\\copied.txt"  # Destination path on the target server
          src: "\\\\SCCM\\temp\\foo.txt"  # Source file path on the source server
          dest: "C:\\temp\\"  # Destination path on the target server
          remote_src: yes  # Important: Indicates that the source is on a remote host
          backup: yes  # Optional: Creates a backup of the destination file before copying
          force: yes # Optional: Set to yes to always copy the file, even if it exists and is identical
        delegate_to: sccm
        become: true
       # become_user: "{{ ansible_user }}"
